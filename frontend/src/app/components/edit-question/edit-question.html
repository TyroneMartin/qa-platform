<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      
      <!-- Loading State -->
      <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- Edit Form -->
      <div *ngIf="!isLoading" class="card">
        <div class="card-header">
          <h3 class="mb-0">Edit Question</h3>
        </div>
        <div class="card-body">
          <form [formGroup]="questionForm" (ngSubmit)="onSubmit()">
            
            <!-- Error Message -->
            <div *ngIf="error" class="alert alert-danger">
              {{ error }}
            </div>

            <!-- Title Field -->
            <div class="mb-3">
              <label for="title" class="form-label">
                Question Title *
                <small class="text-muted">(minimum 10 characters)</small>
              </label>
              <input 
                type="text" 
                class="form-control"
                [class.is-invalid]="isFieldInvalid('title')"
                id="title"
                formControlName="title">
              <div *ngIf="isFieldInvalid('title')" class="invalid-feedback">
                {{ getFieldError('title') }}
              </div>
            </div>

            <!-- Content Field -->
            <div class="mb-3">
              <label for="content" class="form-label">
                Question Details *
                <small class="text-muted">(minimum 20 characters)</small>
              </label>
              <textarea 
                class="form-control"
                [class.is-invalid]="isFieldInvalid('content')"
                id="content"
                formControlName="content"
                rows="8"></textarea>
              <div *ngIf="isFieldInvalid('content')" class="invalid-feedback">
                {{ getFieldError('content') }}
              </div>
            </div>

            <!-- Tags Field -->
            <div class="mb-3">
              <label for="tags" class="form-label">
                Tags
                <small class="text-muted">(separate with commas)</small>
              </label>
              <input 
                type="text" 
                class="form-control"
                id="tags"
                formControlName="tags">
            </div>

            <!-- Submit Buttons -->
            <div class="d-flex justify-content-between">
              <button type="button" class="btn btn-secondary" (click)="router.navigate(['/questions', question?._id])">
                Cancel
              </button>
              <button 
                type="submit" 
                class="btn btn-primary"
                [disabled]="questionForm.invalid || isSubmitting">
                <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2"></span>
                {{ isSubmitting ? 'Updating...' : 'Update Question' }}
              </button>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>